<import src="../common/footer.wxml" />

<view class="container">

  <view class="page-body">

    <view class="userJoin jbw">
        <view class="user-avatar">
          <open-data type="userAvatarUrl" class="user-avatar-img"></open-data>
        </view>
        <view class="join-icon img-box"><image src="/images/userJoin.png" mode="aspectFit" class="join-icon-img"></image></view>
        <view class="app-logo"><image src="/images/logo.png" mode="aspectFit" class="app-logo-img"></image></view>
    </view>

    <view class="loginPanel" hidden="{{hidden_fastLogin}}">
        <form bindsubmit="fastLoginSubmit">
          <view class="loginTitle">注册/登录</view>

          <view class="section">
            <text class="input-label">手机号码</text>
            <input class="input-text" name="phone" placeholder="手机号码" bindinput="setValue" data-name="phone" />
          </view>

          <view class="section msgCode">
            <text class="input-label">验证码</text>
            <input class="input-text" name="msgcode" placeholder="短信验证码" bindinput="setValue" data-name="msgcode" />
            <button class="btn-min" type="default" bindtap="getPhoneCode" data-type="fast" disabled="{{codeDisabled}}">{{codeTxt}}</button>
          </view>

          <view class="section">
            <button type="primary" open-type="getUserInfo" bindgetuserinfo="getUserInfo" data-action="fastLoginSubmit">确定</button>
          </view>

          <view class="section">
              <button type="default" bindtap="showPanel" data-type="login">帐号密码登录</button>
          </view>

          <view class="section findpass" bindtap="goFindPass">
              忘记密码？找回密码
          </view>
        </form>
    </view>

    <view class="accountPanel" hidden="{{hidden_login}}">
        <form bindsubmit="loginSubmit">
          <view class="loginTitle">帐号密码登录</view>

          <view class="section">
            <text class="input-label">帐号</text>
            <input class="input-text" name="phone" placeholder="手机号码/昵称" value="{{formParams.phone}}" bindinput="setValue" data-name="phone" />
          </view>

          <view class="section">
            <text class="input-label">登录密码</text>
            <input class="input-text" name="password" placeholder="25BOY帐户密码" password bindinput="setValue" data-name="password" />
          </view>

          <view class="section">
            <button type="primary" open-type="getUserInfo" bindgetuserinfo="getUserInfo" data-action="loginSubmit">登录</button>
          </view>

          <view class="section">
              <button type="default" bindtap="showPanel" data-type="fastLogin">返回</button>
          </view>

          <view class="section findpass" bindtap="goFindPass">
              忘记密码？找回密码
          </view>
        </form>
    </view>


    <view class="registerPanel" hidden="{{hidden_register}}">
        <form bindsubmit="registerSubmit">
          <view class="loginTitle">开通帐号</view>

          <view class="section">
            <text class="input-label">昵称</text>
            <input class="input-text" name="nickname" placeholder="会员昵称" value="{{wxuserinfo.userInfo.nickName ? wxuserinfo.userInfo.nickName : ''}}" bindinput="setValue" data-name="nickname" />
          </view>

          <view class="section">
            <text class="input-label">登录密码</text>
            <input class="input-text" name="password" placeholder="25BOY帐户密码" password bindinput="setValue" data-name="password" />
          </view>

          <view class="section">
            <button type="primary" open-type="getUserInfo" bindgetuserinfo="getUserInfo" data-action="registerSubmit">完成</button>
          </view>

          <view class="section">
              <button type="default" bindtap="showPanel" data-type="fastLogin">返回</button>
          </view>

          <view class="section findpass" bindtap="goFindPass">
              忘记密码？找回密码
          </view>
        </form>
    </view>

  </view>

  <template is="footer" data="{{data:footerData,showHomeBtn:showHomeBtn}}" />
</view>
